<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kary.karyplugin.dao.RecordMapper">
    <insert id="addNewRecord">
        insert into record(game_id,
                           username,
                           kill,
                           death,
                           assist
        )
        values (
                #{game_id},
                #{username},
                #{kill},
                #{death},
                #{assist}
        )
    </insert>
    <select id="getScoreTotal" resultType="int">
        select
            <if test="gameMode == 1">
                score_total_1v1
            </if>
            <if test="gameMode == 2">
                score_total_brawl
            </if>
        from user_game where username=#{username}
    </select>
    <update id="addScore">
        update user_game set
        <if test="gameMode == 1">
            score_total_1v1=score_total_1v1+#{addNum}
        </if>
        <if test="gameMode == 2">
            score_total_brawl=score_total_brawl+#{addNum}
        </if>
        where username=#{username}
    </update>
    <update id="addGamesCount">
        update user_game set games_count=games_count+1 where username=#{username}
    </update>
    <update id="addGamesCount1v1">
        update user_game set games_count_1v1=games_count_1v1+1 where username=#{username}
    </update>
    <update id="addGamesCountDrawl">
        update user_game set games_count_drawl=games_count_drawl+1 where username=#{username}
    </update>
    <select id="selectUserByName" resultType="com.kary.karyplugin.pojo.UserGame" parameterType="string">
        select * from user_game where username=#{username}
    </select>
</mapper>
